{"version":3,"sources":["webpack:///./src/App.vue?ae5f","webpack:///./src/components/ModelsSelect.vue?d5b0","webpack:///./src/components/AlphabeticalSelect.vue?6a1d","webpack:///src/components/AlphabeticalSelect.vue","webpack:///./src/components/AlphabeticalSelect.vue?2422","webpack:///./src/components/AlphabeticalSelect.vue","webpack:///./src/fetchAndCache.js","webpack:///./src/loadAll.js","webpack:///src/components/ModelsSelect.vue","webpack:///./src/components/ModelsSelect.vue?06cd","webpack:///./src/components/ModelsSelect.vue","webpack:///./src/components/YearsInput.vue?f256","webpack:///src/components/YearsInput.vue","webpack:///./src/components/YearsInput.vue?70a5","webpack:///./src/components/YearsInput.vue","webpack:///src/App.vue","webpack:///./src/App.vue?1160","webpack:///./src/App.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticStyle","attrs","_m","rawAllTaxonomies","models","_e","years","staticRenderFns","_v","staticClass","_l","section","index","key","id","_s","notEmptySections","items","get","state","name","on","value","rebuildSections","domProps","emit","anyText","group","label","option","component","fetchAndCache","url","options","fetch","resp","json","loadAll","contentPromise","restPromise","Promise","resolve","linkHeader","headers","match","all","postsPages","flat","changedSection","console","log","selectedYear","directives","rawName","expression","minYear","maxYear","$event","target","composing","year"],"mappings":"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","file":"App.vue.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('form',{staticStyle:{\"width\":\"320px\",\"padding\":\"25px\"},attrs:{\"action\":\"https://somespeed.com/\",\"target\":\"_blank\",\"id\":\"app\"}},[_vm._m(0),(_vm.rawAllTaxonomies.models)?_c('models-select',{attrs:{\"taxonomy\":_vm.rawAllTaxonomies.models,\"value\":1945}}):_vm._e(),(_vm.rawAllTaxonomies.years)?_c('years-input',{attrs:{\"taxonomy\":_vm.rawAllTaxonomies.years,\"value\":0}}):_vm._e(),_c('input',{attrs:{\"type\":\"submit\"}})],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('label',[_vm._v(\" Search query:\"),_c('br'),_c('input',{attrs:{\"type\":\"search\",\"name\":\"s\"}})])}]\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"filter-container model-filter-container\"},_vm._l((_vm.notEmptySections),function(section,index){return _c('label',{key:section.id},[_vm._v(\" Choose \"),(index === 0)?_c('span',[_vm._v(\"brand\")]):(index === 1)?_c('span',[_vm._v(_vm._s(_vm.notEmptySections[index-1].items.get(_vm.notEmptySections[index-1].state).name)+\" model\")]):_c('span',[_vm._v(\"trim\")]),_vm._v(\": \"),_c('alphabetical-select',{attrs:{\"options\":section.items,\"value\":section.state},on:{\"input\":function (value) { return _vm.rebuildSections(value, index); }}})],1)}),0)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('select',{domProps:{\"value\":_vm.value},on:{\"input\":_vm.emit}},[_c('option',{domProps:{\"value\":0}},[_vm._v(_vm._s(_vm.anyText))]),_vm._l((_vm.groups),function(group){return _c('optgroup',{key:group.label,attrs:{\"label\":group.label}},_vm._l((group.items),function(option){return _c('option',{key:option.id,domProps:{\"value\":option.id}},[_vm._v(_vm._s(option.name))])}),0)})],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div>\n\t\t<select @input=\"emit\" :value=\"value\">\n\n\t\t\t<option :value=\"0\">{{anyText}}</option>\n\t\t\t<optgroup v-for=\"group in groups\" :key=\"group.label\" :label=\"group.label\">\n\t\t\t\t<option v-for=\"option in group.items\" :key=\"option.id\" :value=\"option.id\">{{option.name}}</option>\n\t\t\t</optgroup>\n\t\t</select>\n\t</div>\n</template>\n\n<script>\n\texport default {\n\t\tname: 'AlphabeticalSelect',\n\t\tprops: {\n\t\t\toptions: {\n\t\t\t\ttype: Map,\n\t\t\t},\n\n\t\t\tvalue: {\n\t\t\t\tdefault: 0,\n\t\t\t},\n\t\t\tanyText: {\n\t\t\t\tdefault: 'Any',\n\t\t\t\ttype: String,\n\t\t\t},\n\t\t},\n\n\t\tcomputed: {\n\t\t\tsortedOptions() {\n\t\t\t\treturn [...this.options]\n\t\t\t\t\t\t.map((p) => p[1])\n\t\t\t\t\t\t.sort((a, b) => a.name.toUpperCase() < b.name.toUpperCase() ? -1 : a.name.toUpperCase() === b.name.toUpperCase() ? 0 : 1);\n\t\t\t},\n\t\t\tgroups() {\n\t\t\t\tconst groups = [];\n\n\t\t\t\tthis.sortedOptions.forEach(option => {\n\t\t\t\t\tconst letter = option.name.charAt(0).toUpperCase();\n\t\t\t\t\tif (!groups[groups.length - 1] || groups[groups.length - 1].label !== letter) {\n\t\t\t\t\t\tgroups.push({\n\t\t\t\t\t\t\tlabel: letter,\n\t\t\t\t\t\t\titems: [],\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tgroups[groups.length - 1].items.push(option);\n\t\t\t\t});\n\n\t\t\t\treturn groups;\n\t\t\t},\n\n\t\t},\n\n\t\tmethods: {\n\t\t\temit(event) {\n\t\t\t\tthis.$emit('input', parseInt(event.target.value));\n\t\t\t},\n\t\t},\n\t};\n</script>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AlphabeticalSelect.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AlphabeticalSelect.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AlphabeticalSelect.vue?vue&type=template&id=e4861912&scoped=true&\"\nimport script from \"./AlphabeticalSelect.vue?vue&type=script&lang=js&\"\nexport * from \"./AlphabeticalSelect.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e4861912\",\n  null\n  \n)\n\nexport default component.exports","/**\n * Функция выполняет запрос и кэширует результат в sessionStorage\n * @param url\n * @param options\n * @return {Promise<any>}\n */\nexport default async function fetchAndCache(url, options = {}) {\n    let json\n\n\n    // json = sessionStorage.getItem(url);\n    // if (json) {\n    //     return JSON.parse(json);\n    // }\n\n    const resp = await fetch(url, options);\n    json = await resp.json();\n\n    // if (resp.ok) {\n    //     sessionStorage.setItem(url, JSON.stringify(json));\n    // }\n\n\n    return json;\n}\n","export default async function loadAll(url) {\n    const resp = await fetch(url)\n\n    const contentPromise = resp.json()\n    let restPromise = Promise.resolve([])\n\n    const linkHeader = resp.headers.get('link')\n\n    if (linkHeader) {\n\n        const match = linkHeader.match(/<([^>]+)>; rel=\"next\"/)\n        if (match && match[1]) {\n            restPromise = loadAll(match[1])\n        }\n    }\n\n    const postsPages = await Promise.all([contentPromise, restPromise])\n\n    return postsPages.flat()\n\n}\n","<template>\n    <div class=\"filter-container model-filter-container\">\n        <label v-for=\"(section, index) in notEmptySections\" :key=\"section.id\">\n            Choose\n            <span v-if=\"index === 0\">brand</span>\n            <span v-else-if=\"index === 1\">{{notEmptySections[index-1].items.get(notEmptySections[index-1].state).name}} model</span>\n            <span v-else>trim</span>:\n            <alphabetical-select :options=\"section.items\" :value=\"section.state\"\n                                 @input=\"value => rebuildSections(value, index)\"/>\n        </label>\n    </div>\n</template>\n\n<script>\n    import AlphabeticalSelect from \"@/components/AlphabeticalSelect\";\n    import fetchAndCache from '@/fetchAndCache'\n    import loadAll from \"@/loadAll\";\n\n    export default {\n        name: 'ModelsSelect',\n        components: {AlphabeticalSelect},\n        props: ['taxonomy', 'value'],\n\n        data() {\n            return {\n                sections: [],\n            };\n        },\n\n        computed: {\n            loadedIDs() {\n                return this.terms_tree.map(t => t.id)\n            },\n\n            notEmptySections() {\n                const notEmptySections = []\n\n                for (const section of this.sections) {\n                    if (section.items.size < 1) {\n                        return notEmptySections\n                    }\n\n                    notEmptySections.push(section)\n                }\n\n                return notEmptySections\n            },\n\n            lastValue() {\n                let lastValue = 0\n                for (const section of this.notEmptySections) {\n                    if (section.state !== 0) {\n                        lastValue = section.state\n                    }\n                }\n\n                return lastValue\n            }\n        },\n\n        methods: {\n            async rebuildSections(value, sectionIndex) {\n                const changedSection = this.sections[sectionIndex]\n                changedSection.state = value\n\n                this.sections.splice(sectionIndex + 1)\n\n                if (value) {\n                    const parent = changedSection.items.get(value)\n\n                    const section = {\n                        id: parent.id || 0,\n                        items: await this.loadTerms(parent.id),\n                        state: 0\n                    }\n\n                    this.sections.push(section)\n                }\n            },\n            async loadTerm(id) {\n                if (!id) {\n                    return {}\n                }\n\n\n                /**\n                 * Если запрашиваемый термин уже загружен – найти его и вернуть\n                 * Эта оптимизация необходима при инициализации компонента\n                 **/\n                if (this.notEmptySections.length) {\n                    for (const section of this.notEmptySections) {\n                        if (section.items.has(id)) {\n                            return section.items.get(id)\n                        }\n                    }\n                }\n\n                console.log(`loadTerm(${id})`)\n\n\n                return fetchAndCache(\n                    this.taxonomy._links['wp:items'][0].href + '/' + id,\n                );\n            },\n\n            async loadTerms(parent = 0) {\n                const terms = await loadAll(\n                    this.taxonomy._links['wp:items'][0].href +\n                    '?hide_empty=1&per_page=100&parent=' + parent\n                    // + '&exclude=' + this.excludeIDs,\n                );\n\n\n                return new Map(terms.map(t => ([t.id, t])))\n            },\n\n            async setupInitialValue() {\n                if (this.value) {\n                    this.sections.push(...(await this.buildSectionFromChild(this.value)))\n                } else {\n                    this.sections.push(...(await this.buildSectionsFromParent(0)))\n\n                }\n            },\n\n            async buildSectionFromChild(id) {\n                if (!id) {\n                    return []\n                }\n\n                const term = await this.loadTerm(id)\n\n                if (term.parent === undefined) {\n                    return []\n                }\n\n                const parent = await this.loadTerm(term.parent)\n\n\n                const section = {\n                    id: parent.id || 0,\n                    items: await this.loadTerms(parent.id),\n                    state: id\n                }\n\n                return [...(await this.buildSectionFromChild(parent.id)), section]\n            },\n\n            async buildSectionsFromParent(parentID) {\n                const parent = await this.loadTerm(parentID)\n\n                const section = {\n                    id: parentID,\n                    items: await this.loadTerms(parent.id),\n                    state: 0\n                }\n\n                return [section]\n            }\n\n\n        },\n\n        created() {\n            this.setupInitialValue();\n        },\n\n        watch: {\n            'sections': {\n                deep: true,\n                handler(value) {\n                    let lastValue = 0\n                    for (const section of this.notEmptySections) {\n                        if (section.state !== 0) {\n                            lastValue = section.state\n                        }\n                    }\n\n                    console.log({lastValue})\n                },\n            },\n        },\n    };\n\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ModelsSelect.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ModelsSelect.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ModelsSelect.vue?vue&type=template&id=0a68b724&\"\nimport script from \"./ModelsSelect.vue?vue&type=script&lang=js&\"\nexport * from \"./ModelsSelect.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('label',{staticClass:\"filter-container year-filter-container\"},[_vm._v(\" TermID: \"+_vm._s(_vm.value)+\" \"),_c('br'),_vm._v(\" term slug: \"+_vm._s(_vm.selectedYear)+\" \"),_c('br'),_vm._v(\" Choose year: \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.selectedYear),expression:\"selectedYear\"}],attrs:{\"list\":\"years-list\",\"type\":\"number\",\"min\":_vm.minYear,\"max\":_vm.maxYear,\"placeholder\":\"2000\"},domProps:{\"value\":(_vm.selectedYear)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.selectedYear=$event.target.value}}}),_c('datalist',{attrs:{\"id\":\"years-list\"}},_vm._l((_vm.flatYears),function(year){return _c('option',{key:year,domProps:{\"value\":year}})}),0)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <label class=\"filter-container year-filter-container\">\n        TermID: {{value}}\n        <br>\n        term slug: {{selectedYear}}\n        <br>\n        Choose year:\n        <input list=\"years-list\" type=\"number\" :min=\"minYear\" :max=\"maxYear\" placeholder=\"2000\" v-model=\"selectedYear\">\n        <datalist id=\"years-list\">\n            <option v-for=\"year in flatYears\" :key=\"year\" :value=\"year\"></option>\n        </datalist>\n    </label>\n</template>\n\n<script>\n    import loadAll from '@/loadAll';\n\n    export default {\n        name: 'YearsInput',\n\n        props: ['taxonomy', 'value'],\n\n        data() {\n            return {\n                terms: [],\n                selectedYear: (new Date).getFullYear() - 5\n            }\n        },\n\n        computed: {\n            flatYears() {\n                return this\n                    .terms\n                    .map(t => parseInt(t.slug, 10))\n                    .filter(y => !isNaN(y))\n                    .sort((a, b) => a-b)\n            },\n            minYear() {\n                if (this.flatYears.length) {\n                    return Math.min(...this.flatYears)\n                }\n\n                return 1900\n            },\n            maxYear() {\n                if (this.flatYears.length) {\n                    return Math.max(...this.flatYears)\n                }\n\n                return (new Date).getFullYear()\n            },\n            selectedTermId() {\n                const term = this.terms.find(t => t.slug === this.selectedYear)\n                return term ? term.id : 0\n            },\n        },\n\n        methods: {\n            async loadAllTerms() {\n                this.terms.push(...await loadAll(this.taxonomy._links['wp:items'][0].href + '?hide_empty=1&per_page=100'))\n            },\n        },\n\n        created() {\n            this.loadAllTerms()\n        },\n\n        watch: {\n            selectedYear() {\n                this.$emit('input', this.selectedTermId)\n            }\n        }\n    }\n</script>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./YearsInput.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./YearsInput.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./YearsInput.vue?vue&type=template&id=fdf9eb42&scoped=true&\"\nimport script from \"./YearsInput.vue?vue&type=script&lang=js&\"\nexport * from \"./YearsInput.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"fdf9eb42\",\n  null\n  \n)\n\nexport default component.exports","<template>\n\t<form style=\"width: 320px; padding: 25px;\" action=\"https://somespeed.com/\" target=\"_blank\" id=\"app\">\n\t\t<label>\n\t\t\tSearch query:<br>\n\t\t\t<input type=\"search\" name=\"s\">\n\t\t</label>\n\n\t\t<models-select v-if=\"rawAllTaxonomies.models\" :taxonomy=\"rawAllTaxonomies.models\" :value=\"1945\"/>\n\t\t<years-input  v-if=\"rawAllTaxonomies.years\" :taxonomy=\"rawAllTaxonomies.years\" :value=\"0\" />\n\n\t\t<input type=\"submit\">\n\t</form>\n</template>\n\n<script>\n\timport ModelsSelect from '@/components/ModelsSelect.vue';\n\timport fetchAndCache from \"./fetchAndCache\";\n\timport YearsInput from \"@/components/YearsInput\";\n\n\n\texport default {\n\t\tname: 'App',\n\n\t\tcomponents: {\n\t\t\tYearsInput,\n\t\t\tModelsSelect,\n\t\t},\n\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\trawAllTaxonomies: {},\n\t\t\t\tselectedYearTermId: 2000,\n\t\t\t};\n\t\t},\n\n\t\tasync created() {\n\t\t\tconst rawAllTaxonomies = await fetchAndCache('https://somespeed.com/wp-json/wp/v2/taxonomies?type=post');\n\n\t\t\tthis.rawAllTaxonomies = {\n\t\t\t\tmodels: rawAllTaxonomies.models,\n\t\t\t\tyears: rawAllTaxonomies.years,\n\t\t\t};\n\t\t},\n\t};\n</script>\n\n\n\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=24e19867&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}